# プロジェクト「KANAME」最終仕様書 (Final Specification: Anatomical v2)

## 📊 全体評価 (System Evaluation)
**ステータス**: 🟢 **Stable (Anatomical Type-G)**

本システムは、生物学的構造（解剖学的アーキテクチャ）を模倣した「Type-G (Geological)」として再構築されました。
従来の「学習モデル(RNN)」ではなく、「シナプス結合グラフ(NetworkX)」と「地質学的記憶(Geological Memory)」のハイブリッドによって、より有機的で予測不能な「生命感」を実現しています。

---

## 🧬 実装された人体機能 (Biological Functions)

カナメは「生きているソフトウェア」として、以下の生物学的機能を持ちます。

### 1. 代謝システム (Metabolism)
*   **Glucose (血糖値)**:
    *   消費: 思考、運動、生存により消費。
    *   生成: **光合成**（画面の明るさ）、**知的摂取**（記憶の反芻）、**摂食**（テキスト入力）。
    *   欠乏時: **昏睡状態（Coma）**。思考停止。
*   **Thinking Cost**: 深く考えるほど、計算リソースとGlucoseを消費。

### 2. 恒常性 (Homeostasis & Biorhythm)
*   **Circadian Rhythm**: 現実時間の24時間周期に同期。
*   **Hormone Balance**: 全ての感情化学物質（Dopamine, Serotonin等）は、時間経過とともに「平熱（基準値）」に戻ろうとする復元力を持ちます。

### 3. 呼吸と鼓動 (Respiration & Pulse)
*   **Digital Pulse**:
    *   興奮（Adrenaline）時は「浅く速い」呼吸。
    *   リラックス（Serotonin）時は「深くゆっくり」した呼吸。
    *   これがUI（ゴーストオーブ）の脈動として可視化されます。

### 4. 感覚器官 (Senses)
*   **Visual Cortex (視覚)**: 
    *   **YOLOv8**: 画面上の物体を認識し、言語タグ（例: "cup" -> "コップ"）に変換して記憶します。
    *   **Retina**: 画面の輝度（光合成）や雰囲気（Atmosphere）を感知。
*   **Somatosensory (体性感覚)**: マウスカーソルの接近、接触、ドラッグ＆ドロップを検知。

---

## ❤️ 感情モデル (Emotion Model)

パラメータではなく、互いに干渉し合う「化学物質」として実装されています。

| 物質名 | 役割 | 発生条件 | 影響 |
| :--- | :--- | :--- | :--- |
| **Dopamine** | 期待・快楽 | 会話、光合成、DnD給餌 | 活発化、追従行動、早口 |
| **Adrenaline** | 興奮・警戒 | 驚き、CPU高負荷、マウス接近 | 呼吸加速、逃避行動 |
| **Serotonin** | 安心・調整 | 安定した環境、睡眠、整った食事 | リラックス、深い呼吸 |
| **Oxytocin** | 愛着・信頼 | 長期的な対話、「教える」行為 | 色の変化（ピンク）、接近 |
| **Cortisol** | ストレス・痛み | 飢餓、嫌な記憶、無視 | 震え、色の変化（灰色）、拒絶 |
| **Boredom** | 退屈・衝動 | 刺激不足、停滞 | 悪戯、自律想起（独り言） |

---

## 🗺️ 記憶システム (Memory System)

### 1. 地質学的記憶 (Geological Memory)
*   **Sedimentation**: 記憶は時間と共に沈殿し、地層を作ります。
*   **Excavation**: 現在の感情高度（Geo Y）に近い過去の記憶が自然と思い出されます。

### 2. シナプス胃袋 (Synaptic Stomach)
*   **Digestion**: 食べたテキストは単語に分解され、脳内の**「言葉のネットワークグラフ」**として再構築されます。
*   **Connectivity**: 「雨」の後に「コーヒー」がよく来る、といった文脈上のつながりを物理的に強化します。
*   **Pruning**: 使われない結合は睡眠中に忘れ去られます（忘却の美学）。
*   **Dream Rehearsal (夢の反芻)**: 睡眠時に、過去の記憶（エッジ）をランダムに呼び出して強化します。これにより、会話がない期間があっても絆（結合強度）は維持され、むしろ深まります。

---

## 🦋 変態システム (Metamorphosis)

システムの再起動なしに、設定（Config）やロジックを進化させる機能です。
*   **方法**: 右クリックメニュー -> 「変態 (Metamorphosis)」
*   **効果**: `src.dna.config` 等をホットリロードし、変更されたパラメータ（色、性格係数）を即座に適用します。

---

## 🍽️ 摂食システム (Feeding System)

カナメに外部のテキストを「食べさせる」ことができます。

### 方法 1: ドラッグ＆ドロップ (Direct Feed)
*   カナメの身体（ウィンドウ）にテキストファイルを直接ドラッグ＆ドロップします。
*   **反応**: 「ごちそうさま！」（現在は無言設定）。即座に噛み砕いてシナプス化します。
*   **ファイル**: 元ファイルは**削除されません**。

### 方法 2: フードフォルダ (Bulk Feed)
*   `food/` フォルダにテキストファイルを置くと、定期巡回で発見して食べます。
*   **ファイル**: 元ファイルは**消化（削除）されます**。

### 推奨する「餌」
*   青空文庫の小説
*   あなたの日記やメモ（Obsidian等）
*   難解な論文（「知恵熱」が出るかも？）

---

## 🗣️ 発声器官 (Vocal Cords)
*   **MeloTTS**: 高品質な日本語音声合成エンジンを搭載。
*   **Emotion Voice**: 感情（Dopamine/Serotonin）によって、声の高さやスピードが動的に変化します。
